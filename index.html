<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MBA Tracker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap');
        body {
            font-family: 'Poppins', sans-serif;
        }
        .form-checkbox {
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            height: 16px;
            width: 16px;
            border-radius: 4px;
            border: 1px solid #4a5568;
            background-color: #1f2937;
            cursor: pointer;
            position: relative;
            transition: background-color 0.2s, border-color 0.2s;
        }
        .form-checkbox:checked {
            background-color: #ec4899;
            border-color: #ec4899;
        }
        .form-checkbox:checked::after {
            content: '‚úî';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 10px;
            color: white;
        }
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.75);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        .modal-content {
            background-color: #1f2937;
            padding: 2rem;
            border-radius: 0.75rem;
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.3);
            width: 90%;
            max-width: 500px;
            color: #f3f4f6;
        }
        /* Style for inactive tab buttons */
        .main-tab-button {
            color: #9ca3af; /* gray-400 */
            background-color: transparent;
            border-bottom: 2px solid transparent;
        }
        .main-tab-button:hover {
            color: #f9fafb; /* white */
            background-color: #374151; /* gray-700 */
        }
        /* Style for active tab button */
        .main-tab-button.active {
            color: #f3f4f6; /* white */
            background-color: #db2777; /* pink-600 */
            border-color: #db2777;
        }
        /* Hide scrollbar for tab navigation, but allow scrolling */
        .scrollbar-hidden::-webkit-scrollbar {
            display: none;
        }
        .scrollbar-hidden {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }
        /* Ensure iframe fills its container */
        .iframe-container {
            width: 100%;
            height: 80vh; /* Adjust height as needed */
            background-color: #1f2937; /* Dark background for consistency */
            border-radius: 0.75rem;
            overflow: hidden; /* Hide scrollbars if iframe has its own */
        }
        .iframe-container iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
    </style>
</head>
<body class="min-h-screen bg-gray-900 text-gray-100 p-8">

    <div id="custom-alert-modal" class="modal hidden">
        <div class="modal-content">
            <h2 class="text-2xl font-bold mb-4 text-red-400">Erreur de saisie</h2>
            <p id="custom-alert-message" class="mb-6 text-gray-300"></p>
            <button class="w-full bg-red-600 text-white py-2 rounded-full font-semibold hover:bg-red-700 transition-colors duration-200" onclick="document.getElementById('custom-alert-modal').classList.add('hidden')">Fermer</button>
        </div>
    </div>

    <header class="mb-12 text-center">
        <h1 class="text-4xl font-bold mb-2 text-white">
            üöÄ Programme <span class="text-yellow-400">MBA</span>
        </h1>
        <p class="text-gray-400">
            Chief Digital Officer (CDO) et Strat√©gie Digitale (SD)
        </p>
        <p id="welcome-message" class="text-gray-300 text-lg mt-4 hidden">Bonjour !</p>

        <section id="user-settings" class="mt-8 p-6 bg-gray-800 rounded-xl shadow-lg max-w-2xl mx-auto">
            <h2 class="text-xl font-semibold text-white mb-4">Vos informations et pr√©f√©rences</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                <div>
                    <label for="user-firstname" class="block text-sm font-medium text-gray-400 mb-1">Pr√©nom :</label>
                    <input type="text" id="user-firstname" class="w-full px-3 py-2 rounded-md bg-gray-700 border border-gray-600 text-white focus:outline-none focus:border-blue-500" placeholder="Votre pr√©nom">
                </div>
                <div>
                    <label for="user-lastname" class="block text-sm font-medium text-gray-400 mb-1">Nom :</label>
                    <input type="text" id="user-lastname" class="w-full px-3 py-2 rounded-md bg-gray-700 border border-gray-600 text-white focus:outline-none focus:border-blue-500" placeholder="Votre nom">
                </div>
            </div>

            <div class="mb-4">
                <label class="block text-sm font-medium text-gray-400 mb-2">Votre sp√©cialisation :</label>
                <div class="flex space-x-4 justify-center">
                    <label class="inline-flex items-center">
                        <input type="radio" name="specialization-choice" value="CDO" class="form-radio text-orange-500" checked>
                        <span class="ml-2 text-white">CDO</span>
                    </label>
                    <label class="inline-flex items-center">
                        <input type="radio" name="specialization-choice" value="SD" class="form-radio text-fuchsia-500">
                        <span class="ml-2 text-white">SD</span>
                    </label>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                <div>
                    <label for="session-select" class="block text-sm font-medium text-gray-400 mb-1">Votre promo et session :</label>
                    <select id="session-select" class="w-full px-3 py-2 rounded-md bg-gray-700 border border-gray-600 text-white focus:outline-none focus:border-blue-500"></select>
                </div>
                <div>
                    <label for="personal-start-date-input" class="block text-sm font-medium text-gray-400 mb-1">Ma date de d√©but de formation :</label>
                    <input type="date" id="personal-start-date-input" class="w-full px-3 py-2 rounded-md bg-gray-700 border border-gray-600 text-white focus:outline-none focus:border-blue-500">
                </div>
                <div>
                    <label for="personal-end-date-input" class="block text-sm font-medium text-gray-400 mb-1">Ma date de fin de formation :</label>
                    <input type="date" id="personal-end-date-input" class="w-full px-3 py-2 rounded-md bg-gray-700 border border-gray-600 text-white focus:outline-none focus:border-blue-500">
                </div>
            </div>
        </section>
    </header>

    <section class="mb-12 p-6 bg-gray-800 rounded-xl shadow-lg">
        <h2 class="text-2xl font-semibold text-white mb-2">Compte √† rebours ‚è≥</h2>
        <div class="mt-8 mb-8 p-4 bg-gray-900 rounded-lg shadow-inner">
            <h3 class="text-lg font-bold mb-2 text-yellow-400" id="countdown-title">Compte √† rebours de la session s√©lectionn√©e</h3>
            <div class="flex items-center space-x-4 mb-4">
                <span class="text-gray-300 font-medium">Session s√©lectionn√©e :</span>
                <span id="display-selected-session" class="text-white font-semibold"></span>
            </div>
            <div class="grid grid-cols-4 gap-4 text-center">
                <div class="p-4 bg-gray-700 rounded-lg">
                    <span id="countdown-days" class="block text-2xl font-bold text-pink-500">0</span>
                    <span class="block text-sm text-gray-400">Jours</span>
                </div>
                <div class="p-4 bg-gray-700 rounded-lg">
                    <span id="countdown-hours" class="block text-2xl font-bold text-pink-500">0</span>
                    <span class="block text-sm text-gray-400">Heures</span>
                </div>
                <div class="p-4 bg-gray-700 rounded-lg">
                    <span id="countdown-minutes" class="block text-2xl font-bold text-pink-500">0</span>
                    <span class="block text-sm text-gray-400">Minutes</span>
                </div>
                <div class="p-4 bg-gray-700 rounded-lg">
                    <span id="countdown-seconds" class="block text-2xl font-bold text-pink-500">0</span>
                    <span class="block text-sm text-gray-400">Secondes</span>
                </div>
            </div>
            <p class="mt-4 text-sm text-gray-400 text-center">
                Date limite de remise : <span id="deadline-date"></span>
            </p>
        </div>
    </section>

    <section class="mb-12 p-6 bg-gray-800 rounded-xl shadow-lg">
        <h2 class="text-2xl font-semibold text-white mb-2">Progression Globale üìà</h2>
        <div class="flex items-center space-x-4">
            <span id="total-progress-text" class="text-3xl font-extrabold text-white">0%</span>
            <div class="flex-grow">
                <div class="w-full bg-gray-700 rounded-full h-2.5 mt-2 overflow-hidden">
                    <div id="total-progress-bar" class="h-2.5 rounded-full transition-all duration-500 ease-in-out" style="width: 0%; background: linear-gradient(90deg, #ffc107, #ff4081);"></div>
                </div>
            </div>
        </div>
    </section>

    <div class="flex flex-wrap border-b border-gray-700 mb-6 -mx-8 px-8 scrollbar-hidden">
        <button class="main-tab-button py-3 px-4 md:px-6 text-base md:text-lg font-medium rounded-t-lg transition-colors duration-200 focus:outline-none" data-main-tab="program">Suivi du programme</button>
        <button class="main-tab-button py-3 px-4 md:px-6 text-base md:text-lg font-medium rounded-t-lg transition-colors duration-200 focus:outline-none" data-main-tab="training">√âvaluations d'entra√Ænement</button>
        <button class="main-tab-button py-3 px-4 md:px-6 text-base md:text-lg font-medium rounded-t-lg transition-colors duration-200 focus:outline-none" data-main-tab="qcm">Certifications Studi (QCM)</button>
        <button class="main-tab-button py-3 px-4 md:px-6 text-base md:text-lg font-medium rounded-t-lg transition-colors duration-200 focus:outline-none" data-main-tab="final">Certifications finales</button>
        <button class="main-tab-button py-3 px-4 md:px-6 text-base md:text-lg font-medium rounded-t-lg transition-colors duration-200 focus:outline-none" data-main-tab="rattrapage">Rattrapages <span class="text-red-400">‚ö†Ô∏è</span></button>
        <button class="main-tab-button py-3 px-4 md:px-6 text-base md:text-lg font-medium rounded-t-lg transition-colors duration-200 focus:outline-none" data-main-tab="lives">Lives de chef de projet</button>
    </div>

    <div id="main-tab-content-wrapper">
        <section id="tab-content-program" class="tab-content grid gap-8"></section>
        <section id="tab-content-training" class="tab-content grid gap-4 mt-4 hidden"></section>
        <section id="tab-content-qcm" class="tab-content grid gap-4 mt-4 hidden"></section>
        <section id="tab-content-final" class="tab-content grid gap-4 mt-4 hidden"></section>
        <section id="tab-content-rattrapage" class="tab-content grid gap-4 mt-4 hidden"></section>
        <section id="tab-content-lives" class="tab-content mt-4 hidden">
            <div class="iframe-container rounded-xl shadow-lg">
                <iframe src="https://projettechacademy.github.io/Planning-des-Lives-chef-de-projet/" title="Planning des Lives chef de projet"></iframe>
            </div>
        </section>
    </div>
    
    <div id="confetti-container" class="confetti-container"></div>

    <section class="mt-12 text-center">
        <div class="p-6 bg-gray-800 rounded-xl shadow-lg">
            <h3 id="motivational-title" class="text-xl font-bold mb-2 text-yellow-400"></h3>
            <p id="motivational-text" class="text-gray-300 text-lg"></p>
        </div>
    </section>

    <footer class="mt-12 text-center text-gray-400">
        <h3 class="text-lg font-semibold mb-4 text-white">Rejoignez-nous !</h3>
        <div class="flex justify-center space-x-6">
            <a href="https://chat.whatsapp.com/LHiRDN32feFCEko7VxH5oz" target="_blank" rel="noopener noreferrer" class="flex items-center space-x-2 p-3 rounded-full bg-green-600 text-white hover:bg-green-700 transition-colors duration-200">
                <span>üí¨ WhatsApp</span>
            </a>
            <a href="https://discord.gg/DmKDG5FruF" target="_blank" rel="noopener noreferrer" class="flex items-center space-x-2 p-3 rounded-full bg-indigo-600 text-white hover:bg-indigo-700 transition-colors duration-200">
                <span>üëæ Discord</span>
            </a>
            <a href="https://www.notion.so/team/208c2c02-df37-8146-b883-004268501963/join" target="_blank" rel="noopener noreferrer" class="flex items-center space-x-2 p-3 rounded-full bg-pink-600 text-white hover:bg-pink-700 transition-colors duration-200">
                <span>‚ú® Notion</span>
            </a>
        </div>
        <p class="mt-8 text-sm text-gray-500">
            Cr√©atrice de ce document : Mathilde de Martine PAISLEY "L'Enervante Enervante ü§™"
        </p>
    </footer>

    <script>
        // Data and SVG icons
        const initialProgramData = [
            {
                code: 'B1',
                title: "Animer un processus de probl√©matisation et d‚Äôid√©ation √† partir d'une analyse des besoins clients",
                modules: [
                    {
                        code: 'B1_M1',
                        title: 'Analyser les besoins de clients internes/externes',
                        topics: [
                            'La place de la strat√©gie digitale dans la strat√©gie globale de l\'entreprise',
                            'L\'environnement technologique et son impact sur l\'entreprise',
                            'La culture et les valeurs de l\'entreprise',
                            'Les √©tudes de march√©',
                            'La notion de concurrence et diversit√© concurrentielle',
                            'Le benchmark digital',
                            'Le recueil et l\'analyse des besoins',
                            'Identifier et comprendre le client et sa demande',
                        ],
                    },
                    {
                        code: 'B1_M2',
                        title: 'Elaborer un dispositif de veille scientifique, technique, technologique, r√©glementaire, sectorielle et concurrentielle',
                        topics: [
                            'La d√©marche de veille',
                            'La veille technologique : sources, r√©f√©rents, outils et bonnes pratiques',
                            'La veille concurrentielle et sectorielle',
                            'Les autres types de veille',
                            'Les matrices de veille',
                            'L\'√©valuation de la fiabilit√© du dispositif de veille',
                        ],
                    },
                    {
                        code: 'B1_M3',
                        title: 'Interpr√©ter et articuler une probl√©matique en mati√®re de projet d‚Äôinnovation et/ou de transformation √† un commanditaire',
                        topics: [
                            'La probl√©matique d\'innovation ou de transformation',
                            'Orienter le projet d\'innovation sur le client final',
                        ],
                    },
                    {
                        code: 'B1_M4',
                        title: 'Identifier et analyser l‚Äôensemble des risques pour la r√©ussite du projet',
                        topics: [
                            'Analyse des contraintes dans la mise en ≈ìuvre d\'un projet',
                            'Analyse des risques d\'un projet',
                            'Analyse de l\'impact d\'un projet',
                        ],
                    },
                    {
                        code: 'B1_M5',
                        title: 'Animer un processus cr√©atif de production, d√©veloppement et communication',
                        topics: [
                            'Apprendre √† g√©n√©rer des id√©es',
                            'Design Thinking : D√©finir la probl√©matique',
                            'Design Thinking : La phase d‚Äôid√©ation',
                            'Design Thinking : La phase de prototypage de la solution',
                            'Design Thinking : La phase de d\'it√©ration',
                            'Animer un atelier de brainstorming',
                            'Pr√©parer et pr√©senter un dossier de conception',
                        ],
                    },
                    {
                        code: 'B1_M6',
                        title: 'Evaluer l‚Äôad√©quation des pistes cr√©atives aux besoins des utilisateurs finaux',
                        topics: [
                            'La compl√©mentarit√© √©tudes qualitatives / √©tudes quantitatives',
                            'Les √©tudes qualitatives',
                            'La mise en ≈ìuvre d\'√©tudes qualitatives',
                            'Les types d\'√©tudes quantitatives',
                            'La r√©alisation d\'une enqu√™te',
                            'Les m√©thodes d\'√©chantillonnage',
                            'Les √©tudes √† l\'√©preuve du num√©rique',
                        ],
                    },
                ],
            },
            {
                code: 'B2',
                title: 'Concevoir un projet de transformation et/ou d‚Äôinnovation',
                modules: [
                    {
                        code: 'B2_M1',
                        title: 'Elaborer la proposition de valeur d‚Äôun projet',
                        topics: [
                            'Les fondamentaux d\'une proposition de valeur',
                            'Les objectifs d\'une proposition de valeur',
                            'Construire et communiquer sa proposition de valeur',
                        ],
                    },
                    {
                        code: 'B2_M2',
                        title: 'D√©finir l‚Äôorganisation, les √©tapes et les besoins en ressources d\'un projet',
                        topics: [
                            'La planification d\'un projet web',
                            'Le r√¥le de la note de cadrage',
                            'La r√©daction d\'un cahier des charges',
                            'Les diff√©rents acteurs du projet',
                            'Identifier et s√©lectionner les prestataires et les fournisseurs adapt√©s aux besoins du projet',
                            'La construction d\'un tableau de bord op√©rationnel',
                        ],
                    },
                    {
                        code: 'B2_M3',
                        title: 'D√©finir le mod√®le √©conomique',
                        topics: [
                            'Le budget digital et les d√©cisions d‚Äôinvestissement',
                            'Calculer la rentabilit√© d‚Äôun projet digital',
                            'L\'Executive Summary d\'un projet d\'innovation',
                        ],
                    },
                    {
                        code: 'B2_M4',
                        title: 'D√©finir le business plan d\'un projet de transformation et/ou d‚Äôinnovation',
                        topics: [
                            'La pr√©paration et la structuration du business plan',
                            'La faisabilit√© √©conomique et financi√®re du business plan',
                            'Quels chiffres dans un business plan ?',
                        ],
                    },
                    {
                        code: 'B2_M5',
                        title: 'D√©fendre la solution s√©lectionn√©e/le projet de transformation',
                        topics: [
                            'Pr√©senter son Business Plan',
                            'Soutenir son business plan',
                            'La pr√©sentation √©crite d\'un projet',
                            'Des pr√©sentations de r√©sultats impactantes',
                        ],
                    },
                ],
            },
            {
                code: 'B3',
                title: 'Concevoir et mettre en ≈ìuvre une strat√©gie de communication interne/externe',
                modules: [
                    {
                        code: 'B3_M1',
                        title: 'Identifier les cibles de communication internes / externes et les utilisateurs finaux',
                        topics: [
                            'Identifier ses cibles',
                            'Les objectifs de communication',
                            'Les cibles en fonction des diff√©rents r√©seaux sociaux',
                            'La cr√©ation des personas',
                        ],
                    },
                    {
                        code: 'B3_M2',
                        title: 'Concevoir et d√©ployer une strat√©gie de communication √† destination de cibles internes',
                        topics: [
                            'La strat√©gie de communication : le positionnement',
                            'La strat√©gie de communication : Les objectifs',
                            'La strat√©gie de communication : Les cibles',
                            'La strat√©gie de communication : L\'axe cr√©atif',
                            'Le projet de communication',
                            'Fixer des objectifs SMART',
                            'Les outils de mesure de l\'efficacit√©',
                            'La place de la conduite du changement',
                        ],
                    },
                    {
                        code: 'B3_M3',
                        title: 'Elaborer une strat√©gie de communication √† destination de cibles externes',
                        topics: [
                            'Le positionnement de communication',
                            'Le r√¥le du plan de communication',
                            'Les composantes du plan de communication',
                            'La d√©finition des m√©dias cible',
                            'La budg√©tisation et le calendrier des actions',
                        ],
                    },
                    {
                        code: 'B3_M4',
                        title: 'R√©aliser une campagne de communication cr√©ative',
                        topics: [
                            'Les messages cl√©s dans le cadre d\'une communication efficace',
                            'Structurer son message',
                            'Production d\'un message',
                            'Le storytelling',
                            'Les moyens et supports de communication',
                            'Les supports audio-visuels',
                            'Le multicanal et le mix marketing',
                            'Les outils de mesure de l\'efficacit√©',
                        ],
                    },
                ],
            },
            {
                code: 'B4',
                title: 'Piloter un projet d‚Äôinnovation et/ou de transformation jusqu\'√† la phase de rendu final',
                modules: [
                    {
                        code: 'B4_M1',
                        title: 'R√©aliser le prototypage des diff√©rentes pistes cr√©atives',
                        topics: [
                            'Prise en compte des informations qualitatives et quantitatives lors des recherches exploratoires pour la cr√©ation des repr√©sentations de produits, de services, d\'espace et d\'identit√©.',
                            'Qualit√© et pertinence des repr√©sentations produites.',
                            'Pertinence des diff√©rents choix techniques, mat√©riaux, donn√©es, ergonomie.',
                            'Cr√©ativit√© et choix esth√©tiques.',
                            'Pertinence des solutions propos√©es au regard du brief et de la d√©marche mise en ≈ìuvre.'
                        ],
                    },
                    {
                        code: 'B4_M2',
                        title: 'Observer les utilisateurs durant la phase test',
                        topics: [
                            'Test utilisateur',
                            'Evaluation quantitative de la solution propos√©e',
                            'Evaluation qualitative de la solution propos√©e',
                            'Recueillir des informations sur les comportements utilisateurs',
                            '√âlaborer les fiches d\'observation',
                            'Construire les rapports de test',
                        ],
                    },
                    {
                        code: 'B4_M3',
                        title: 'Concevoir et r√©aliser une solution d\'un projet d‚Äôinnovation et/ou de transformation',
                        topics: [
                            'La d√©marche qualit√©',
                            'La mesure de la qualit√©',
                            'Les tests qualit√© selon la nature des livrables',
                            'Normes et r√©glementations',
                            'Low tech',
                            'Pr√©sentation d\'une maquette de solution d\'innovation ou de transformation',
                        ],
                    },
                    {
                        code: 'B4_M4',
                        title: 'Piloter des revues de projet',
                        topics: [
                            'La revue de projet dans le cycle de vie d\'un projet',
                            'Les participants √† la revue de projet',
                            'Animer des r√©unions structur√©es',
                            'Les outils d\'une revue de projet',
                        ],
                    },
                    {
                        code: 'B4_M5',
                        title: '√âvaluer l\'atteinte des objectifs du projet d‚Äôinnovation et/ou de transformation',
                        topics: [
                            'Le cahier des charges des livrables',
                            '√âl√©ments et crit√®res de mesure de l\'exp√©rience client',
                            'Le management de la qualit√© des projets',
                            'L\'√©valuation d\'un projet : le bilan qualitatif',
                        ],
                    },
                    {
                        code: 'B4_M6',
                        title: 'Piloter une d√©marche d‚Äôam√©lioration continue',
                        topics: [
                            'Le suivi des indicateurs qualit√© et am√©lioration continue',
                            'Organiser une gouvernance dans le cadre d\'une d√©marche d\'am√©lioration continue',
                            'M√©thodologie pour piloter un projet digital : une d√©marche it√©rative',
                            '√âmettre des recommandations pour les futurs projets',
                        ],
                    },
                ],
            },
            {
                code: 'B5',
                title: 'Manager une √©quipe projet, une direction technique et/ou une √©quipe transverse',
                modules: [
                    {
                        code: 'B5_M1',
                        title: 'S√©lectionner les membres de l‚Äô√©quipe projet (internes et externes)',
                        topics: [
                            'Recruter les comp√©tences op√©rationnelles n√©cessaires √† l\'√©quipe projet digital',
                            'Les comp√©tences et talents',
                            'Typologie des organismes de prestataires',
                            'L\'utilit√© du suivi de la performance',
                            'La performance et l\'√©valuation de de la prestation',
                        ],
                    },
                    {
                        code: 'B5_M2',
                        title: '√âvaluer l‚Äôad√©quation entre les profils des collaborateurs de l‚Äô√©quipe projet et le besoin en comp√©tences',
                        topics: [
                            'Cartographier les comp√©tences n√©cessaires au projet',
                            'Les comp√©tences comportementales ou soft skills',
                            'La ma√Ætrise des processus',
                            'Les relations d\'√©quipes face aux t√¢ches',
                            'L\'am√©lioration du travail en √©quipe',
                            'La communication avec l\'√©quipe projet',
                            'Traiter les dysfonctionnements du travail en √©quipe',
                        ],
                    },
                    {
                        code: 'B5_M3',
                        title: 'Diriger une √©quipe projet compos√©e d\'intervenants internes et externes',
                        topics: [
                            'Communiquer sur son projet pour d√©velopper l‚Äôadh√©sion',
                            'Le business model canvas',
                            'La pr√©sentation √©crite d\'un projet',
                            'La politique d\'inclusion en entreprise',
                            'La lutte contre la discrimination',
                        ],
                    },
                ],
            },
            {
                code: 'B6',
                title: 'Garantir la performance d‚Äôun projet de transformation et/ou d‚Äôinnovation en mati√®re de technique et/ou technologie',
                specialization: 'CDO',
                modules: [
                    {
                        code: 'B6_M1',
                        title: 'Piloter un projet de transformation et/ou d‚Äôinnovation en mati√®re de technique et/ou technologie',
                        topics: [
                            'Les sp√©cificit√©s du projet digital',
                            'Le recueil de l\'analyse des besoins',
                            'D√©finir la solution et le projet cibles',
                            'D√©finir les objectifs et faire valider l‚Äôopportunit√© du projet',
                            'Le choix technologique de la solution',
                            'Le cahier des charges technique : d√©tailler la mise en ≈ìuvre',
                            'Le cahier des charges technique : du besoin √† la solution technique',
                            'La construction du planning',
                            'Les principaux acteurs d‚Äôun projet digital : la ma√Ætrise d‚Äô≈ìuvre',
                            'Les principaux acteurs d‚Äôun projet digital : la ma√Ætrise d‚Äôouvrage',
                            '√âtablir la gouvernance du projet, d√©finir les r√¥les et les responsabilit√©s',
                        ],
                    },
                    {
                        code: 'B6_M2',
                        title: 'D√©finir l‚Äôarchitecture technique adapt√©e au projet',
                        topics: [
                            'Introduction aux architectures multicouches',
                            'Les design patterns',
                            'Les microservices et architecture distribu√©e',
                            'L\'√©co-conception dans l\'architecture logicielle',
                            'L\'offre de service d\'un fournisseur de services Cloud',
                            'Les solutions SaaS et leurs implications architecturales',
                            'Les principes de s√©curit√© en architecture',
                            'La r√©alisation de l\'√©tude de faisabilit√©',
                            'Le cahier des charges technique : description fonctionnelle et technique',
                            'Le cahier des charges techniques : budget, d√©lais et suivi',
                            'R√©diger un dossier technique d\'architecture',
                        ],
                    },
                    {
                        code: 'B6_M3',
                        title: 'Tester sa solution digitale',
                        topics: [
                            'La d√©marche qualit√© en d√©veloppement',
                            'La d√©marche DevOps',
                            'La mise en place de l\'int√©gration continue (CI)',
                            'La mise en place de la livraison ou d√©ploiement continu (CD)',
                            'Les enjeux des plans de test',
                            '√âlaborer un sc√©nario de test',
                            'Mettre en place un environnement de test',
                            'Les outils et les strat√©gies des tests de s√©curit√©',
                            'Planifier efficacement les tests',
                            'Valider les r√©sultats des tests',
                            'Automatiser les tests en DevOps',
                        ],
                    },
                    {
                        code: 'B6_M4',
                        title: '√âmettre des pr√©conisations quant √† la r√©solution de probl√®mes techniques',
                        topics: [
                            'La r√©solution d\'une situation critique pour la survie du projet',
                            'R√©aliser une analyse causale √† laide d‚Äôentretiens et d‚Äôenqu√™tes terrain',
                            'La conception de la solution gr√¢ce au Design Thinking',
                        ],
                    },
                ],
            },
            {
                code: 'B7',
                title: 'Concevoir et mettre en ≈ìuvre de la strat√©gie de communication',
                specialization: 'SD',
                modules: [
                    {
                        code: 'B7_M1',
                        title: '√âlaborer et d√©ployer une strat√©gie de brand content',
                        topics: [
                            'Une introduction √† la strat√©gie de contenu',
                            'Les √©tapes de la strat√©gie de contenu',
                            'Les KPI dans la strat√©gie de contenu',
                            'Le d√©veloppement d\'une strat√©gie de contenu',
                            'Les √©tapes de la strat√©gie de cr√©ation de contenu',
                            'R√©ussir sa strat√©gie de cr√©ation de contenu',
                            'L\'orientation artistique et le brief cr√©atif',
                            'Introduction √† la production de contenus digitaux',
                            'La cr√©ation de contenu digital en ad√©quation avec sa cible',
                            'Le brand content',
                            'Le brand content et le storytelling digital',
                            'Le contenu de marque',
                        ],
                    },
                    {
                        code: 'B7_M2',
                        title: 'Promouvoir un site internet, une application mobile ou une web app',
                        topics: [
                            'Les sites internet',
                            'Le r√©f√©rencement des sites Web',
                            'UX/UI Design',
                            'Les co√ªts de promotion',
                            'Introduction aux social ads (publicit√© sur les r√©seaux sociaux)',
                            'Les diff√©rentes formes de communication',
                            'Les moyens et supports de communication',
                            'Les supports audio-visuels',
                            'Le multicanal et le mix marketing',
                            'Les outils de mesure de l\'efficacit√©',
                        ],
                    },
                    {
                        code: 'B7_M3',
                        title: 'Produire un contenu diff√©renciant',
                        topics: [
                            'La r√©daction de la charte et de la ligne √©ditoriale',
                            'Les outils du content marketing',
                            'Animation du plan d‚Äôaction marketing',
                            'Produire du contenu avec l\'IA g√©n√©rative',
                        ],
                    },
                ],
            },
        ];

        const evaluationData = {
            qcm: [
                { name: 'R√©ussir ma certification Studi du bloc Animer un processus de probl√©matisation et d‚Äôid√©ation...', date: '', grade: '', status: '√Ä faire', specialization: 'both' },
                { name: 'R√©ussir ma certification Studi du bloc Concevoir un projet de transformation...', date: '', grade: '', status: '√Ä faire', specialization: 'both' },
                { name: 'R√©ussir ma certification Studi du bloc Concevoir et mettre en ≈ìuvre une strat√©gie de communication...', date: '', grade: '', status: '√Ä faire', specialization: 'both' },
                { name: 'R√©ussir ma certification Studi du bloc Piloter un projet d‚Äôinnovation et/ou de transformation...', date: '', grade: '', status: '√Ä faire', specialization: 'both' },
                { name: 'R√©ussir ma certification Studi du bloc Manager une √©quipe projet...', date: '', grade: '', status: '√Ä faire', specialization: 'both' },
                { name: 'R√©ussir ma certification Studi du bloc Garantir la performance d‚Äôun projet de transformation...', date: '', grade: '', status: '√Ä faire', specialization: 'CDO' },
                { name: 'R√©ussir ma certification Studi du bloc Concevoir et mettre en ≈ìuvre de la strat√©gie de communication', date: '', grade: '', status: '√Ä faire', specialization: 'SD' },
                { name: 'R√©ussir mon Dipl√¥me Studi Chief Digital Officer', date: '', grade: '', status: '√Ä faire', specialization: 'CDO' },
                { name: 'R√©ussir mon Dipl√¥me Studi Strat√©gie Digitale', date: '', grade: '', status: '√Ä faire', specialization: 'SD' },
            ],
            training: [
                { name: '√âvaluation d‚Äôentra√Ænement - Animer un processus de probl√©matisation et d‚Äôid√©ation...', date: '', grade: '', status: '√Ä faire', specialization: 'both' },
                { name: '√âvaluation d‚Äôentra√Ænement - Concevoir et mettre en ≈ìuvre une strat√©gie de communication...', date: '', grade: '', status: '√Ä faire', specialization: 'both' },
                { name: '√âvaluation d‚Äôentra√Ænement - Manager une √©quipe projet...', date: '', grade: '', status: '√Ä faire', specialization: 'both' },
                { name: '√âvaluation d‚Äôentra√Ænement - Piloter un projet d‚Äôinnovation et/ou de transformation...', date: '', grade: '', status: '√Ä faire', specialization: 'both' },
            ],
            final: [
                { name: 'Examen Certifiant - Animer un processus de probl√©matisation et d‚Äôid√©ation...', date: '', grade: '', status: '√Ä faire', specialization: 'both' },
                { name: 'Examen Certifiant - Concevoir un projet de transformation et/ou d‚Äôinnovation (√©crit)', date: '', grade: '', status: '√Ä faire', specialization: 'both' },
                { name: 'Examen Certifiant - Concevoir un projet de transformation et/ou d‚Äôinnovation (vid√©o)', date: '', grade: '', status: '√Ä faire', specialization: 'both' },
                { name: 'Examen Certifiant - Concevoir et mettre en ≈ìuvre une strat√©gie de communication interne/externe', date: '', grade: '', status: '√Ä faire', specialization: 'both' },
                { name: 'Examen Certifiant - Piloter un projet d‚Äôinnovation et/ou de transformation jusqu‚Äô√† la phase de rendu final', date: '', grade: '', status: '√Ä faire', specialization: 'both' },
                { name: 'Examen Certifiant - Management d‚Äôune √©quipe projet, d‚Äôune direction technique et/ou d‚Äôune √©quipe transverse', date: '', grade: '', status: '√Ä faire', specialization: 'both' },
                { name: 'Examen Certifiant - Garantir la performance d‚Äôun projet de transformation et/ou d‚Äôinnovation en mati√®re de technique et/ou technologie', date: '', grade: '', status: '√Ä faire', specialization: 'CDO' },
                { name: 'Examen Certifiant - Concevoir et mettre en ≈ìuvre de la strat√©gie de communication', date: '', grade: '', status: '√Ä faire', specialization: 'SD' },
            ],
            rattrapage: [
                { name: 'Examen Certifiant - Animer un processus de probl√©matisation... - Rattrapage', date: '', grade: '', status: '√Ä faire', specialization: 'both' },
                { name: 'Examen Certifiant - Concevoir un projet de transformation... (√©crit) - Rattrapage', date: '', grade: '', status: '√Ä faire', specialization: 'both' },
                { name: 'Examen Certifiant - Concevoir et mettre en ≈ìuvre une strat√©gie de communication... - Rattrapage', date: '', grade: '', status: 'both' },
                { name: 'Examen Certifiant - Piloter un projet d‚Äôinnovation... - Rattrapage', date: '', grade: '', status: 'both' },
                { name: 'Examen Certifiant - Management d‚Äôune √©quipe projet... - Rattrapage', date: '', grade: '', status: '√Ä faire', specialization: 'both' },
                { name: 'Examen Certifiant - Garantir la performance d‚Äôun projet... - Rattrapage', date: '', grade: '', status: '√Ä faire', specialization: 'CDO' },
                { name: 'Examen Certifiant - Concevoir et mettre en ≈ìuvre de la strat√©gie de communication - Rattrapage', date: '', grade: '', status: '√Ä faire', specialization: 'SD' },
            ]
        };

        const sessionsData = [
            {
                promo: '2025',
                session: 'Session 2',
                startDate: '2025-01-01',
                endDate: '2025-11-24',
                status: '‚úÖ Date confirm√©e par Studi',
                isConfirmed: true
            },
            {
                promo: '2026',
                session: 'Session 1',
                startDate: '2026-01-01',
                endDate: '2026-05-28',
                status: '‚ö†Ô∏è Date fictive ‚Äì en attente de validation',
                isConfirmed: false
            },
            {
                promo: '2026',
                session: 'Session 2',
                startDate: '2026-01-01',
                endDate: '2026-11-26',
                status: '‚ö†Ô∏è Date fictive ‚Äì en attente de validation',
                isConfirmed: false
            },
            {
                promo: '2027',
                session: 'Session 1',
                startDate: '2027-01-01',
                endDate: '2027-05-27',
                status: '‚ö†Ô∏è Date fictive ‚Äì en attente de validation',
                isConfirmed: false
            },
            {
                promo: '2027',
                session: 'Session 2',
                startDate: '2027-01-01',
                endDate: '2027-11-25',
                status: '‚ö†Ô∏è Date fictive ‚Äì en attente de validation',
                isConfirmed: false
            },
            {
                promo: '2028',
                session: 'Session 1',
                startDate: '2028-01-01',
                endDate: '2028-05-25',
                status: '‚ö†Ô∏è Date fictive ‚Äì en attente de validation',
                isConfirmed: false
            },
            {
                promo: '2028',
                session: 'Session 2',
                startDate: '2028-01-01',
                endDate: '2028-11-23',
                status: '‚ö†Ô∏è Date fictive ‚Äì en attente de validation',
                isConfirmed: false
            },
        ];

        const sharedEvaluationCriteria = {
            B1: {
                title: "Animer un processus de probl√©matisation et d'id√©ation...",
                criteria: {
                    "C1.1 Analyser les besoins de clients internes/externes": [
                        "D√©montre la bonne utilisation de grilles de lecture issues de plusieurs disciplines (sciences humaines et sociales, sciences du design, marketing, management,...).",
                        "Identification des enjeux et des forces sous-jacents √† la demande.",
                        "D√©montre sa compr√©hension de la culture d'entreprise et du positionnement du commanditaire, et leur influence sur les enjeux rencontr√©s.",
                        "D√©montre la ma√Ætrise des m√©thodologies d'interviews, de questionnements et de reformulation."
                    ],
                    "C1.2 √âlaborer un dispositif de veille": [
                        "Pr√©sentation d'une cartographie des principaux domaines de veille exposant la finalit√© g√©n√©rale, les objectifs pr√©cis et les moyens mobilis√©s.",
                        "D√©montre la pertinence des outils de veille utilis√©s au regard des objectifs recherch√©s.",
                        "D√©montre la pertinence et la fiabilit√© des sources utilis√©es.",
                        "Synth√©tise l'information et d√©montre sa capacit√© √† la restituer.",
                        "D√©montre l'int√©r√™t des informations compl√©mentaires recherch√©es."
                    ],
                    "C1.3 Interpr√©ter et articuler une probl√©matique": [
                        "Au travers de sa formulation, le cadre d'intervention et les enjeux doivent transpara√Ætre de mani√®re claire et concise de fa√ßon √† ce que le lecteur puisse d√©j√† avoir une id√©e sur les port√©es et limites de l'√©tude.",
                        "La possibilit√© de travailler sur le sujet pr√©d√©fini se d√©montre dans l'√©nonciation de la probl√©matique.",
                        "Le respect de l'√©quilibre entre l'exploration et la qu√™te d'innovation est imp√©ratif.",
                        "D√©montre l'int√©r√™t de la probl√©matique au regard de la culture d'entreprise, des besoins pr√©alablement identifi√©s, de son positionnement, et des enjeux rencontr√©s."
                    ],
                    "C1.4 Identifier et analyser l'ensemble des risques": [
                        "D√©montre sa connaissance des concepts et m√©thodes de management des risques.",
                        "D√©finit une politique de management des risques r√©aliste au regard du contexte.",
                        "Les √©v√©nements susceptibles de repr√©senter un risque pour le projet sont identifi√©s de fa√ßon exhaustive.",
                        "D√©montre sa ma√Ætrise des outils de gestion des risques (mod√®le de cotation de la gravit√©).",
                        "Les pr√©conisations en mati√®re de gestion des risques sont coh√©rentes et pertinentes."
                    ],
                    "C1.5 Animer un processus cr√©atif": [
                        "Le candidat pr√©sente de fa√ßon ludique l'atelier et explicite les r√®gles et la m√©thodologie de d√©ploiement. L'explication est claire et compr√©hensible pour un public n√©ophyte.",
                        "La m√©thodologie et les outils utilis√©s permettent de favoriser la g√©n√©ration d'id√©es et de garantir le maintien d'une bonne atmosph√®re.",
                        "Le candidat d√©montre l'apport de la m√©thodologie par rapport au projet √† mener. Il explicite et argumente son choix. Il d√©montre une prise de hauteur n√©cessaire."
                    ],
                    "C1.6 √âvaluer l'ad√©quation des pistes cr√©atives aux besoins des utilisateurs finaux": [
                        "Le candidat utilise des m√©thodologies de tests utilisateurs (quantitatifs ou qualitatifs) suivant des protocoles ad hoc adapt√©s.",
                        "Le candidat adopte une attitude d'apprentissage et ne cherche pas √† d√©fendre sa solution ou √† influencer les r√©ponses des utilisateurs.",
                        "D√©montre sa capacit√© √† prendre en compte des √©l√©ments issus de la communication non verbale.",
                        "Le candidat documente les r√©sultats de mani√®re √† en faciliter l'analyse."
                    ]
                }
            },
            B2: {
                title: "Concevoir un projet de transformation et/ou d'innovation",
                criteria: {
                    "C2.1 √âlaborer la proposition de valeur": [
                        "La proposition de valeur est pertinente car elle r√©pond √† la probl√©matique d√©finie.",
                        "Le candidat pr√©sente les avantages de l'offre face √† la concurrence de fa√ßon synth√©tique et r√©aliste.",
                        "Il d√©montre que la proposition de valeur est unique et claire."
                    ],
                    "C2.2 D√©finir l'organisation": [
                        "Le candidat choisit et d√©taille une m√©thodologie de projet adapt√©e √† l'organisation.",
                        "D√©montre sa ma√Ætrise de la m√©thodologie de gestion de projet.",
                        "Il identifie correctement les parties int√©ress√©es et pr√©sente une gouvernance du projet efficiente.",
                        "Il propose un compte rendu et un document de suivi pertinents (visuel, reprenant les solutions s√©lectionn√©es, le r√©troplanning et les livrables attendus)."
                    ],
                    "C2.3 et C2.4 D√©finir le mod√®le √©conomique et le business plan": [
                        "L'executive summary est synth√©tique, percutant, p√©dagogique et didactique.",
                        "D√©montre sa ma√Ætrise de la structure d'un business plan complet (nom de l'entreprise, activit√©, valeurs, histoire, audience cible, typologie du march√©).",
                        "Les moyens n√©cessaires √† la mise en ≈ìuvre du projet sont list√©s et sont r√©alistes.",
                        "L'√©valuation des investissements et des charges globales est coh√©rente au regard des capacit√©s de financements."
                    ],
                    "C2.5 D√©fendre la solution s√©lectionn√©e": [
                        "Le candidat propose des pr√©conisations pertinentes et d√©montre l'exploitation et la bonne interpr√©tation des r√©sultats des tests utilisateurs.",
                        "Le candidat respecte le cadre et le formalisme impos√©s.",
                        "La pr√©sentation est argument√©e et convaincante."
                    ]
                }
            },
            B3: {
                title: "Concevoir et mettre en ≈ìuvre une strat√©gie de communication interne/externe",
                criteria: {
                    "C3.1 Identifier les cibles de communication": [
                        "Le candidat propose une identification de la cible compl√®te (habitudes, persona, √¢ge, besoins).",
                        "Il segmente la client√®le de mani√®re pertinente.",
                        "La construction d'un personae synth√©tise de fa√ßon claire et concise les r√©sultats de l'analyse de l'audience.",
                        "Les objectifs de la strat√©gie de communication sont d√©finis et sont SMART."
                    ],
                    "C3.2 Concevoir et d√©ployer une strat√©gie de communication √† destination de cibles internes": [
                        "Les actions de communication d√©ploy√©es permettent aux collaborateurs de s'approprier le projet.",
                        "Les indicateurs de r√©sultats de la strat√©gie sont d√©finis."
                    ],
                    "C3.3 √âlaborer une strat√©gie de communication √† destination de cibles externes": [
                        "La strat√©gie de communication refl√®te une traduction cr√©ative de la proposition de valeur du projet.",
                        "Les objectifs de la strat√©gie sont d√©finis et sont SMART.",
                        "Les axes de communication et les diff√©rents canaux sont d√©finis et adapt√©s √† la cible.",
                        "Le plan de communication est √©labor√©, avec des actions temporellement planifi√©es.",
                        "Le budget de la strat√©gie est d√©fini et respect√©."
                    ],
                    "C3.4 R√©aliser une campagne de communication cr√©ative": [
                        "Les messages cl√©s dans le cadre d'une communication efficace",
                        "Structurer son message",
                        "Production d'un message",
                        "Le storytelling",
                        "Les moyens et supports de communication",
                        "Les supports audio-visuels",
                        "Le multicanal et le mix marketing",
                        "Les outils de mesure de l'efficacit√©",
                    ]
                }
            },
            B4: {
                title: "Piloter un projet d‚Äôinnovation et/ou de transformation jusqu'√† la phase de rendu final",
                criteria: {
                    "C4.1 R√©aliser le prototypage": [
                        "Prise en compte des informations qualitatives et quantitatives lors des recherches exploratoires pour la cr√©ation des repr√©sentations de produits, de services, d'espace et d'identit√©.",
                        "Qualit√© et pertinence des repr√©sentations produites.",
                        "Pertinence des diff√©rents choix techniques, mat√©riaux, donn√©es, ergonomie.",
                        "Cr√©ativit√© et choix esth√©tiques.",
                        "Pertinence des solutions propos√©es au regard du brief et de la d√©marche mise en ≈ìuvre."
                    ],
                    "C4.2 Observer les utilisateurs": [
                        "Le candidat utilise des m√©thodologies de tests utilisateurs (quantitatifs ou qualitatifs) suivant des protocoles ad hoc adapt√©s.",
                        "Le candidat adopte une attitude d'apprentissage et ne cherche pas √† d√©fendre sa solution ou √† influencer les r√©ponses.",
                        "D√©montre sa capacit√© √† prendre en compte des √©l√©ments issus de la communication non verbale.",
                        "Le candidat documente les r√©sultats de mani√®re √† en faciliter l'analyse."
                    ],
                    "C4.3 Concevoir et r√©aliser une solution": [
                        "D√©montre la prise en compte de plusieurs crit√®res lors de l'√©valuation d'une maquette de principe (fonctionnalit√©s, ergonomie, r√©actions des utilisateurs).",
                        "Pertinence de l'application de la solution (utilit√©, utilisabilit√© et plaisir √† l'usage)."
                    ],
                    "C4.4 Piloter des revues de projet": [
                        "Le candidat d√©montre que la revue de projet a √©t√© men√©e de fa√ßon compl√®te et syst√©matique √† l'aide de documents.",
                        "Il d√©montre que la revue de projet a permis d'√©valuer le respect des exigences qualit√©, d'identifier les probl√®mes et de proposer des solutions.",
                        "Les documents utilis√©s retracent l'√©volution du projet, rappellent les objectifs et prennent en compte les aspects l√©gaux et r√©glementaires."
                    ],
                    "C4.5 √âvaluer l'atteinte des objectifs": [
                        "Les indicateurs de suivi et de r√©ussite du projet utilis√©s sont pertinents.",
                        "Le candidat d√©montre que le projet a √©t√© pilot√© avec le souci de respecter la probl√©matique.",
                        "Il propose une √©valuation globale du d√©roul√© et de la r√©ussite du projet."
                    ],
                    "C4.6 Piloter une d√©marche d‚Äôam√©lioration continue": [
                        "Le candidat explicite la fa√ßon dont il va mobiliser la direction g√©n√©rale et la gouvernance du projet.",
                        "La d√©marche it√©rative est explicit√©e et permet d'int√©grer facilement des ajustements √©ventuels.",
                        "Le candidat identifie correctement les objectifs et freins potentiels √† la r√©alisation du projet, et apporte des r√©ponses permettant de lever ces r√©sistances aux changements."
                    ]
                }
            },
            B5: {
                title: "Manager une √©quipe projet, une direction technique et/ou une √©quipe transverse",
                criteria: {
                    "C5.1 et C5.2 S√©lectionner et √©valuer l'√©quipe": [
                        "Le candidat traduit correctement les enjeux du projet et les comp√©tences cl√©s √† ma√Ætriser.",
                        "Il identifie des crit√®res ayant permis de constituer une √©quipe (exp√©rience, dipl√¥mes, aspirations).",
                        "Il √©value la performance de chaque membre et explicite les axes d'am√©lioration.",
                        "Explication claire du r√¥le de chacun et des ajustements mis en ≈ìuvre."
                    ],
                    "C5.3 Diriger une √©quipe projet": [
                        "Le document doit expliquer de fa√ßon claire et p√©dagogique aux diff√©rentes parties prenantes le mode de fonctionnement et les cons√©quences de l'approche de gestion choisie.",
                        "Le candidat rend √©videntes les √©tapes de production de la solution et les ressources mobilis√©es.",
                        "Il d√©crit pr√©cis√©ment le d√©roulement et la planification d'un cycle d'it√©ration.",
                        "Il explicite les r√¥les des membres de l'√©quipe dans la mise en ≈ìuvre de l'approche."
                    ]
                }
            }
        };

        const cdoEvaluationCriteria = {
            B6: {
                title: "Garantir la performance d'un projet de transformation et/ou d'innovation en mati√®re de technique et/ou technologie",
                criteria: {
                    "C6B.1 Piloter un projet de transformation et/ou d'innovation...": [
                        "Il/elle d√©montre sa capacit√© √† choisir une m√©thode et des outils de suivi de projet adapt√© √† sa nature et aux objectifs strat√©giques pr√©alablement d√©finis.",
                        "Il/elle d√©finit de fa√ßon exhaustive les livrables attendus (livrables fonctionnels, √©ditoriaux, graphiques, et d'int√©gration...)",
                        "Il pr√©sente un calendrier de d√©ploiement de projet r√©aliste au vu du projet.",
                        "Le candidat pr√©sente un plan de coordination des acteurs complet comprenant l'animation de r√©union, les temps forts type campagnes de communication/sensibilisation... Le plan de coordination est r√©aliste."
                    ],
                    "C6B.2 D√©finir l'architecture technique adapt√©e...": [
                        "Les nomenclatures utilis√©es doivent √™tre imp√©rativement univoques et homog√®nes.",
                        "Le document de sp√©cifications fonctionnelles doit √™tre structur√©, hi√©rarchis√©, lisible et s'appuyer sur des repr√©sentations graphiques dans le respect des bonnes pratiques et des standards du secteur.",
                        "Les enjeux d'√©volutivit√© de la solution doivent √™tre la cl√© des choix architecturaux et de l'expression de leur motivation dans le document."
                    ],
                    "C6B.3 Emettre des pr√©conisations quant √† la r√©solution de probl√®mes techniques...": [
                        "Le candidat devra expliciter et valider au regard des connaissances et bonnes pratiques existantes: la m√©thode ad√©quate pour identifier la source des bogues, la mani√®re de les pratiques de test et la validation des correctifs.",
                        "Les pr√©conisations en mati√®re de corrections de bogues sont r√©alistes et pertinentes au regard du probl√®me technique identifi√©.",
                        "Le candidat utilise correctement le vocabulaire et les terminologies m√©tiers."
                    ]
                }
            }
        };

        const sdEvaluationCriteria = {
            B7: {
                title: "Concevoir et mettre en ≈ìuvre de la strat√©gie de communication",
                criteria: {
                    "C6A.1 √âlaborer et d√©ployer une strat√©gie de brand content": [
                        "Le candidat identifie correctement son audience (groupe de personnes susceptibles d'adh√©rer √† la marque et/ou de r√©agir √† son discours).",
                        "La strat√©gie de brand content est claire et int√®gre l'identit√© visuelle, la planification des publications, les types de contenus (√©crits, visuels, sonores, audiovisuels, oeuvres... √† publier et la teneur des messages √† porter (style, vocabulaire, ton...)).",
                        "Le candidat choisit les m√©dias pertinents sur lesquels diffuser sa strat√©gie de brand content au regard de la strat√©gie globale de l'organisation et de sa cible."
                    ],
                    "C6A.2 Promouvoir un site internet, une application mobile ou une web app": [
                        "Le candidat propose une strat√©gie de r√©f√©rencement (naturel et payant) coh√©rente par rapport √† la strat√©gie globale de l'organisation, sa cible, son positionnement et son budget.",
                        "Le candidat pr√©sente une strat√©gie de cross-promotion r√©aliste et pertinente int√©grant l'ensemble des m√©dias sur lesquels communiquer en vue de la promotion du site interne/de l'application mobile/web mobile."
                    ],
                    "C6A.3 Produire un contenu diff√©renciant et/ou innovant": [
                        "Le candidat d√©termine des objectifs chiffr√©s et mesurables d'acquisition et de transformation des cibles vis√©es selon les canaux de communication retenus dans le cadre de la strat√©gie de brand content.",
                        "Le candidat propose une ligne √©ditoriale claire et diff√©renciante. Cette ligne √©ditoriale est respect√©e dans le cadre de la production des diff√©rents contenus.",
                        "Le contenu propos√© par le candidat est diff√©renciant en ce sens qu'il aborde le sujet en profondeur, en s'appuyant sur l'existant (source) et en int√©grant un point de vue novateur.",
                        "Le candidat d√©montre sa capacit√© √† mobiliser des connaissances th√©oriques (th√©ories, actualit√©, m√©thodes de travail...) et √† les adapter pour r√©pondre √† un contexte sp√©cifique et complexe."
                    ]
                }
            }
        };
        
        const motivationalPhrases = [
            { title: "N'abandonnez jamais", text: "Chaque pas, m√™me le plus petit, vous rapproche de votre objectif. La pers√©v√©rance est la cl√© du succ√®s." },
            { title: "Le succ√®s est au bout de l'effort", text: "La seule limite √† notre √©panouissement de demain sera nos doutes d'aujourd'hui." },
            { title: "Croyez en vos r√™ves", text: "La meilleure fa√ßon de pr√©dire l'avenir est de le cr√©er." },
            { title: "Chaque jour est une nouvelle chance", text: "Ne laissez pas hier prendre trop de place aujourd'hui." },
            { title: "Le travail d'√©quipe rend le r√™ve possible", text: "Seul on va plus vite, ensemble on va plus loin." },
        ];
        
        const CheckCircleIcon = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" /></svg>`;
        const DangerousIcon = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2L1 21h22L12 2zm1 14h-2v-2h2v2zm0-4h-2V8h2v4z" /></svg>`;
        const InfoIcon = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z" /></svg>`;
        const ChevronRightIcon = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z" /></svg>`;
        const ChevronDownIcon = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6z" /></svg>`;

        // State-like variables (declared with let for assignment within initialize)
        let selectedSpecialization = 'CDO';
        let programProgress = [];
        let programEvaluations = {};
        let sessions = sessionsData; // Initial sessions data
        let customStartDates = {}; // Stores custom start dates by session index
        let customEndDates = {}; // Stores custom end dates by session index
        let expandedBlocks = {};
        let expandedModules = {};
        let expandedCriteria = {};
        let selectedSessionIndex = 0;
        let countdownInterval;
        let selectedMainTab = localStorage.getItem('selected_main_tab') || 'program'; // New: default selected main tab

        // DOM elements (declared globally with let, assigned in initialize)
        let programContainer, totalProgressBar, totalProgressText;
        let userFirstnameInput, userLastnameInput, specializationChoiceRadios, sessionSelect, personalStartDateInput, personalEndDateInput;
        let displaySelectedSession, deadlineDate, countdownDays, countdownHours, countdownMinutes, countdownSeconds;
        let motivationalTitle, motivationalText, countdownTitle;
        let customAlertModal, customAlertMessage, welcomeMessageDisplay;
        let mainTabButtons; // New: for main tab navigation
        let tabContentProgram, tabContentTraining, tabContentQCM, tabContentFinal, tabContentRattrapage, tabContentLives;


        // Functions
        function showAlert(message) {
            customAlertMessage.textContent = message;
            customAlertModal.classList.remove('hidden');
        }

        function saveAllData() {
            localStorage.setItem('mba_tracker_progress', JSON.stringify(programProgress));
            localStorage.setItem('mba_tracker_evaluations', JSON.stringify(programEvaluations));
            // Save user preferences
            localStorage.setItem('user_name', JSON.stringify({
                firstName: userFirstnameInput.value,
                lastName: userLastnameInput.value
            }));
            localStorage.setItem('selected_specialization', selectedSpecialization);
            localStorage.setItem('selected_session_index', selectedSessionIndex);
            localStorage.setItem('custom_start_dates', JSON.stringify(customStartDates)); // Save custom start dates
            localStorage.setItem('custom_end_dates', JSON.stringify(customEndDates)); // Save custom end dates
            localStorage.setItem('sessions_data_modified', JSON.stringify(sessions)); // Save modified sessions data (for end dates in table)
            localStorage.setItem('selected_main_tab', selectedMainTab); // New: Save selected main tab
        }

        function loadAllData() {
            const savedProgress = localStorage.getItem('mba_tracker_progress');
            if (savedProgress) {
                programProgress = JSON.parse(savedProgress);
            } else {
                programProgress = initialProgramData.map(block => ({
                    ...block,
                    modules: block.modules.map(module => ({
                        ...module,
                        topics: module.topics.map(topic => ({
                            text: topic,
                            isCompleted: false,
                        })),
                    })),
                }));
            }
            
            const savedEvaluations = localStorage.getItem('mba_tracker_evaluations');
            if (savedEvaluations) {
                programEvaluations = JSON.parse(savedEvaluations);
            } else {
                programEvaluations = JSON.parse(JSON.stringify(evaluationData));
            }

            // Load user preferences
            const savedUserName = localStorage.getItem('user_name');
            if (savedUserName) {
                const userName = JSON.parse(savedUserName);
                // Assign values to inputs directly (will be done after DOM elements are assigned)
            }

            const savedSpecialization = localStorage.getItem('selected_specialization');
            if (savedSpecialization) {
                selectedSpecialization = savedSpecialization;
            }

            const savedSessionIndex = localStorage.getItem('selected_session_index');
            if (savedSessionIndex !== null) {
                selectedSessionIndex = parseInt(savedSessionIndex);
            }

            const savedCustomStartDates = localStorage.getItem('custom_start_dates');
            if (savedCustomStartDates) {
                customStartDates = JSON.parse(savedCustomStartDates);
            }

            const savedCustomEndDates = localStorage.getItem('custom_end_dates');
            if (savedCustomEndDates) {
                customEndDates = JSON.parse(savedCustomEndDates);
            }

            const savedSessionsData = localStorage.getItem('sessions_data_modified');
            if (savedSessionsData) {
                sessions = JSON.parse(savedSessionsData);
            }

            const savedSelectedMainTab = localStorage.getItem('selected_main_tab');
            if (savedSelectedMainTab) {
                selectedMainTab = savedSelectedMainTab;
            }
        }

        function updateWelcomeMessage() {
            if (welcomeMessageDisplay && userFirstnameInput) { // Ensure elements are defined
                const firstName = userFirstnameInput.value;
                if (firstName) {
                    welcomeMessageDisplay.textContent = `Bonjour, ${firstName} ! üëã`;
                    welcomeMessageDisplay.classList.remove('hidden');
                } else {
                    welcomeMessageDisplay.classList.add('hidden');
                }
            }
        }

        function calculateProgress(items) {
            const total = items.length;
            if (total === 0) return 0;
            const completed = items.filter(item => item.isCompleted).length;
            return Math.round((completed / total) * 100);
        }

        function getBlockProgress(block) {
            const allTopicsInBlock = block.modules.flatMap(module => module.topics);
            return calculateProgress(allTopicsInBlock);
        }

        function getModuleProgress(module) {
            return calculateProgress(module.topics);
        }

        function getEvaluationProgress(evaluations) {
            const total = evaluations.length;
            if (total === 0) return 0;
            const completed = evaluations.filter(eval => eval.status !== '√Ä faire').length;
            return Math.round((completed / total) * 100);
        }

        function updateTotalProgress() {
            let allTopics = [];
            programProgress.forEach(block => {
                if (!block.specialization || block.specialization === selectedSpecialization) {
                    allTopics = allTopics.concat(block.modules.flatMap(module => module.topics));
                }
            });
            const completedTopics = allTopics.filter(item => item.isCompleted).length;
            const totalTopics = allTopics.length;

            let allEvaluations = [];
            
            const trainingEvals = programEvaluations.training ? programEvaluations.training.filter(e => e.specialization === 'both' || e.specialization === selectedSpecialization) : [];
            const qcmEvals = programEvaluations.qcm ? programEvaluations.qcm.filter(e => e.specialization === 'both' || e.specialization === selectedSpecialization) : [];
            const finalEvals = programEvaluations.final ? programEvaluations.final.filter(e => e.specialization === 'both' || e.specialization === selectedSpecialization) : [];
            const rattrapageEvals = programEvaluations.rattrapage ? programEvaluations.rattrapage.filter(e => e.specialization === 'both' || e.specialization === selectedSpecialization) : [];

            allEvaluations = allEvaluations.concat(trainingEvals, qcmEvals, finalEvals, rattrapageEvals);

            const completedEvaluations = allEvaluations.filter(eval => eval.status !== '√Ä faire').length;
            const totalEvaluations = allEvaluations.length;

            const totalItems = totalTopics + totalEvaluations;
            const completedItems = completedTopics + completedEvaluations;

            if (totalItems === 0) {
                totalProgressText.textContent = `0%`;
                totalProgressBar.style.width = `0%`;
                return;
            }

            const totalProgress = Math.round((completedItems / totalItems) * 100);
            totalProgressText.textContent = `${totalProgress}%`;
            totalProgressBar.style.width = `${totalProgress}%`;
        }

        function renderProgressBar(progress, accentColor) {
            return `
                <div class="w-24 bg-gray-700 rounded-full h-2.5">
                    <div
                        class="h-2.5 rounded-full transition-all duration-500 ease-in-out ${accentColor}"
                        style="width: ${progress}%"
                    ></div>
                </div>
            `;
        }

        function renderProgramContent() {
            tabContentProgram.innerHTML = ''; // Clear previous content
            programProgress.forEach((block, blockIndex) => {
                const isSpecializationBlock = block.specialization && block.specialization !== selectedSpecialization;
                if (isSpecializationBlock) return;

                const blockProgress = getBlockProgress(block);
                const accentColor = block.code === 'B6' && selectedSpecialization === 'CDO'
                    ? 'bg-orange-600'
                    : block.code === 'B7' && selectedSpecialization === 'SD'
                    ? 'bg-fuchsia-600'
                    : 'bg-blue-600';
                const headerColor = block.code === 'B6' && selectedSpecialization === 'CDO'
                    ? 'text-orange-400'
                    : block.code === 'B7' && selectedSpecialization === 'SD'
                    ? 'text-fuchsia-400'
                    : 'text-blue-400';
                const isBlockExpanded = !!expandedBlocks[block.code];

                const sharedData = sharedEvaluationCriteria[block.code] || {};
                const specificData = block.specialization === 'CDO' ? cdoEvaluationCriteria[block.code] : sdEvaluationCriteria[block.code];

                const criteriaTitleColor = block.specialization === 'SD' ? 'text-fuchsia-400' : 'text-orange-400';
                const criteriaBulletColor = block.specialization === 'SD' ? 'text-pink-500' : 'text-yellow-400';

                // Dynamic border color for the block container
                const dynamicBorderColor = block.code === 'B6' && selectedSpecialization === 'CDO'
                    ? '#ea580c' // Tailwind orange-600
                    : block.code === 'B7' && selectedSpecialization === 'SD'
                    ? '#c026d3' // Tailwind fuchsia-600
                    : '#2563eb'; // Tailwind blue-600

                let blockHtml = `
                    <div class="bg-gray-800 rounded-xl p-6 shadow-lg border-2 transition-all duration-300 ease-in-out hover:shadow-xl hover:border-pink-500" style="border-color: ${dynamicBorderColor};">
                        <div class="flex justify-between items-center cursor-pointer block-header" data-block-code="${block.code}">
                            <div class="flex items-center">
                                <span class="w-6 h-6 mr-2 text-white transition-transform duration-300 ${isBlockExpanded ? 'rotate-90' : ''}">
                                    ${ChevronRightIcon}
                                </span>
                                <h2 class="text-xl font-bold ${headerColor}">${block.code} : ${block.title}</h2>
                            </div>
                            <div class="flex items-center space-x-2">
                                <span class="text-lg font-semibold text-white">${blockProgress}%</span>
                                ${renderProgressBar(blockProgress, accentColor)}
                            </div>
                        </div>
                `;

                if (isBlockExpanded) {
                    blockHtml += `
                        <div class="grid gap-4 mt-4">
                    `;
                    block.modules.forEach((module, moduleIndex) => {
                        const moduleProgress = getModuleProgress(module);
                        const isModuleExpanded = !!expandedModules[module.code];

                        blockHtml += `
                            <div class="p-4 bg-gray-700 rounded-lg">
                                <div class="flex justify-between items-center cursor-pointer module-header" data-module-code="${module.code}">
                                    <div class="flex items-center">
                                        <span class="w-5 h-5 mr-2 text-gray-300 transition-transform duration-300 ${isModuleExpanded ? 'rotate-90' : ''}">
                                            ${ChevronRightIcon}
                                        </span>
                                        <h3 class="text-md font-semibold text-gray-200">
                                            ${module.code} : ${module.title}
                                        </h3>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <span class="text-sm font-medium text-gray-300">${moduleProgress}%</span>
                                    </div>
                                </div>
                        `;

                        if (isModuleExpanded) {
                            blockHtml += `
                                <div class="grid gap-2 mt-2">
                            `;
                            module.topics.forEach((topic, topicIndex) => {
                                blockHtml += `
                                    <div class="flex items-center text-gray-300">
                                        <input
                                            type="checkbox"
                                            class="form-checkbox h-4 w-4 text-pink-500 rounded border-gray-600 focus:ring-pink-500 bg-gray-800 transition-colors duration-200 cursor-pointer topic-checkbox"
                                            data-block-code="${block.code}"
                                            data-module-index="${moduleIndex}"
                                            data-topic-index="${topicIndex}"
                                            ${topic.isCompleted ? 'checked' : ''}
                                        />
                                        <span class="ml-3 text-sm">${topic.text}</span>
                                    </div>
                                `;
                            });
                            blockHtml += `
                                </div>
                            `;
                        }

                        blockHtml += `
                            </div>
                        `;
                    });

                    // Crit√®res d'√©valuation
                    let criteriaHtml = '';
                    const allCriteria = { ...sharedData.criteria, ...(specificData ? specificData.criteria : {}) };

                    for (const compCode in allCriteria) {
                        const isCriterionExpanded = !!expandedCriteria[compCode];
                        const criteriaList = allCriteria[compCode];
                        criteriaHtml += `
                            <div class="p-4 bg-gray-700 rounded-lg mt-4">
                                <div class="flex justify-between items-center cursor-pointer criterion-header" data-criterion-code="${compCode}">
                                    <div class="flex items-center">
                                        <span class="w-5 h-5 mr-2 text-gray-300 transition-transform duration-300 ${isCriterionExpanded ? 'rotate-90' : ''}">
                                            ${ChevronRightIcon}
                                        </span>
                                        <h5 class="text-md font-semibold text-gray-200">${compCode}</h5>
                                    </div>
                                </div>
                                <div class="mt-2 ${isCriterionExpanded ? '' : 'hidden'}">
                                    <ul class="list-none pl-0 space-y-1 text-gray-400">
                                        ${criteriaList.map(crit => `
                                            <li class="flex items-start">
                                                <span class="${criteriaBulletColor} mr-2 flex-shrink-0 mt-1">‚≠ê</span>
                                                <p class="text-sm text-gray-400 text-justify">${crit}</p>
                                            </li>
                                        `).join('')}
                                    </ul>
                                </div>
                            </div>
                        `;
                    }

                    if (criteriaHtml) {
                        blockHtml += `
                            <div class="mt-4 p-4 bg-gray-900 rounded-xl shadow-inner">
                                <h4 class="text-lg font-bold ${criteriaTitleColor} mb-4">Crit√®res d'√©valuation du bloc üìù</h4>
                                ${criteriaHtml}
                            </div>
                        `;
                    }

                    blockHtml += `
                        </div>
                    `;
                }

                blockHtml += `
                    </div>
                `;
                tabContentProgram.innerHTML += blockHtml;
            });
            updateTotalProgress();
            addEventListeners(); // Re-attach listeners for dynamically added content
        }

        function renderEvaluationsContent(category) {
            let targetContentDiv;
            if (category === 'training') targetContentDiv = tabContentTraining;
            else if (category === 'qcm') targetContentDiv = tabContentQCM;
            else if (category === 'final') targetContentDiv = tabContentFinal;
            else if (category === 'rattrapage') targetContentDiv = tabContentRattrapage;
            else return; // Should not happen with valid categories

            targetContentDiv.innerHTML = ''; // Clear previous content
            
            const filteredEvals = programEvaluations[category].filter(e => e.specialization === 'both' || e.specialization === selectedSpecialization);

            let categoryHtml = '';
            
            if (filteredEvals.length === 0) {
                categoryHtml += `<p class="text-gray-400 text-sm italic">Aucune √©valuation dans cette cat√©gorie pour la sp√©cialisation s√©lectionn√©e.</p>`;
            } else {
                filteredEvals.forEach((evaluation, index) => {
                    categoryHtml += renderEvaluationItem(evaluation, category, index);
                });
            }
            
            targetContentDiv.innerHTML = categoryHtml;
            
            addEvaluationEventListeners(); // Re-attach listeners for dynamically added content
            updateTotalProgress();
        }

        function renderEvaluationItem(evaluation, category, index) {
            let statusColor = 'text-gray-400';
            let statusText = evaluation.status;
            let statusIcon = InfoIcon;

            if (evaluation.status === 'valid√©') {
                statusColor = 'text-green-400';
                statusIcon = CheckCircleIcon;
            } else if (evaluation.status === 'non valid√©' || evaluation.status === 'manqu√©') {
                statusColor = 'text-red-400';
                statusIcon = DangerousIcon;
                statusText = evaluation.status === 'manqu√©' ? 'Manqu√©' : 'Non valid√©';
            } else if (evaluation.status === 'en attente') {
                statusColor = 'text-yellow-400';
                statusIcon = InfoIcon; // Using InfoIcon for 'en attente'
                statusText = 'En attente';
            } else {
                statusText = '√Ä faire';
            }

            const isRattrapageNotValidated = category === 'rattrapage' && evaluation.status === 'non valid√©';
            
            // Adjust name based on specialization if applicable
            let evaluationName = evaluation.name;
            if (evaluation.specialization && evaluation.specialization !== 'both') {
                evaluationName += ` (${evaluation.specialization})`;
            }

            // Add a specific message for non-validated rattrapage
            const rattrapageMessage = isRattrapageNotValidated 
                ? '<div class="p-3 bg-red-900 bg-opacity-30 rounded-lg flex items-center space-x-2 mt-4"><span class="text-red-400 text-sm font-medium">Pour changer de session, veuillez contacter l\'√©quipe p√©dagogique.</span></div>'
                : '';

            return `
                <div class="bg-gray-800 p-4 rounded-lg flex flex-col space-y-4">
                    <h4 class="text-sm font-semibold text-gray-200">${evaluationName}</h4>
                    <div class="flex items-center space-x-4">
                        <div class="flex items-center space-x-2">
                            <span class="text-gray-400 text-sm">Date de d√©p√¥t:</span>
                            <input
                                type="date"
                                class="bg-gray-900 border border-gray-600 rounded-md px-2 py-1 text-sm text-white focus:outline-none focus:border-blue-500 date-input"
                                data-category="${category}"
                                data-index="${index}"
                                value="${evaluation.date}"
                            />
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="text-gray-400 text-sm">Note:</span>
                            <input
                                type="text"
                                class="bg-gray-900 border border-gray-600 rounded-md px-2 py-1 text-sm text-white focus:outline-none focus:border-blue-500 grade-input w-20"
                                data-category="${category}"
                                data-index="${index}"
                                value="${evaluation.grade}"
                                placeholder="Note"
                            />
                        </div>
                        <div class="flex items-center space-x-2 flex-grow justify-end">
                            <div class="w-5 h-5 ${statusColor}">${statusIcon}</div>
                            <span class="text-sm font-medium ${statusText}"></span>
                        </div>
                    </div>
                    ${rattrapageMessage}
                    <div class="mt-2 text-sm text-gray-500 flex justify-end">
                        <button class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors duration-200 set-status-btn" data-category="${category}" data-index="${index}" data-status="valid√©">Marquer comme Valid√©</button>
                        <button class="bg-yellow-600 text-white px-4 py-2 rounded-lg hover:bg-yellow-700 transition-colors duration-200 set-status-btn ml-2" data-category="${category}" data-index="${index}" data-status="en attente">Marquer En attente</button>
                        <button class="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors duration-200 set-status-btn ml-2" data-category="${category}" data-index="${index}" data-status="non valid√©">Marquer Non Valid√©</button>
                    </div>
                </div>
            `;
        }

        function renderLivesContent() {
            // The iframe is already in the HTML, we just need to ensure the section is visible.
            // No dynamic content generation needed for this tab, as the iframe handles it.
        }

        function renderAppContent() {
            // Hide all main tab content sections
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.add('hidden');
            });
            // Deactivate all main tab buttons
            document.querySelectorAll('.main-tab-button').forEach(button => {
                button.classList.remove('active', 'bg-pink-600', 'text-white');
                button.classList.add('text-gray-400', 'hover:text-white', 'hover:bg-gray-700');
            });

            // Show active tab content and activate its button
            const activeTabButton = document.querySelector(`.main-tab-button[data-main-tab="${selectedMainTab}"]`);
            if (activeTabButton) {
                activeTabButton.classList.add('active', 'bg-pink-600', 'text-white');
                activeTabButton.classList.remove('text-gray-400', 'hover:text-white', 'hover:bg-gray-700');
            }

            if (selectedMainTab === 'program') {
                tabContentProgram.classList.remove('hidden');
                renderProgramContent();
            } else if (selectedMainTab === 'lives') {
                tabContentLives.classList.remove('hidden');
                renderLivesContent(); // Call the new render function for lives
            }
            else {
                // For other evaluation tabs
                const evaluationContentDiv = document.getElementById(`tab-content-${selectedMainTab}`);
                if (evaluationContentDiv) {
                    evaluationContentDiv.classList.remove('hidden');
                    renderEvaluationsContent(selectedMainTab);
                }
            }
        }

        function addEventListeners() {
            document.querySelectorAll('.block-header').forEach(header => {
                header.addEventListener('click', (e) => {
                    const blockCode = e.currentTarget.dataset.blockCode;
                    expandedBlocks[blockCode] = !expandedBlocks[blockCode];
                    renderProgramContent(); // Re-render only program content
                });
            });

            document.querySelectorAll('.module-header').forEach(header => {
                header.addEventListener('click', (e) => {
                    const moduleCode = e.currentTarget.dataset.moduleCode;
                    expandedModules[moduleCode] = !expandedModules[moduleCode];
                    renderProgramContent(); // Re-render only program content
                });
            });

            document.querySelectorAll('.topic-checkbox').forEach(checkbox => {
                checkbox.addEventListener('change', (e) => {
                    const blockCode = e.target.closest('[data-block-code]').dataset.blockCode; // Get blockCode from closest parent
                    const blockIndex = programProgress.findIndex(block => block.code === blockCode);
                    const moduleIndex = parseInt(e.target.dataset.moduleIndex);
                    const topicIndex = parseInt(e.target.dataset.topicIndex);
                    programProgress[blockIndex].modules[moduleIndex].topics[topicIndex].isCompleted = e.target.checked;
                    saveAllData();
                    renderProgramContent(); // Re-render only program content
                });
            });

            // Event listener for criterion headers (within program content)
            document.querySelectorAll('.criterion-header').forEach(header => {
                header.addEventListener('click', (e) => {
                    const criterionCode = e.currentTarget.dataset.criterionCode;
                    expandedCriteria[criterionCode] = !expandedCriteria[criterionCode];
                    renderProgramContent(); // Re-render to update chevron and visibility
                });
            });
        }

        function addEvaluationEventListeners() {
            // These event listeners should be attached to elements within the currently active tab content.
            // Since elements are re-rendered, it's safe to query the entire document.
            document.querySelectorAll('.date-input').forEach(input => {
                input.addEventListener('change', (e) => {
                    const category = e.target.dataset.category;
                    const index = parseInt(e.target.dataset.index);
                    const evalList = programEvaluations[category];  
                    if (evalList && evalList[index]) {  
                        evalList[index].date = e.target.value;
                        saveAllData();
                        renderEvaluationsContent(category); // Re-render the specific evaluation tab
                    }
                });
            });

            document.querySelectorAll('.grade-input').forEach(input => {
                input.addEventListener('input', (e) => {
                    const category = e.target.dataset.category;
                    const index = parseInt(e.target.dataset.index);
                    const evalList = programEvaluations[category];  
                    if (evalList && evalList[index]) {  
                        evalList[index].grade = e.target.value;
                        saveAllData();
                        // No need to re-render here for every input, only when status changes or date
                    }
                });
            });

            document.querySelectorAll('.set-status-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const category = e.target.dataset.category;
                    const index = parseInt(e.target.dataset.index);
                    const status = e.target.dataset.status;
                    const evalList = programEvaluations[category];  
                    if (evalList && evalList[index]) {  
                        evalList[index].status = status;
                        saveAllData();
                        renderEvaluationsContent(category); // Re-render the specific evaluation tab
                        updateTotalProgress();
                    }
                });
            });
        }

        function formatDate(dateString) {
            if (!dateString) return '';
            const [year, month, day] = dateString.split('-');
            return `${day}/${month}/${year}`;
        }

        function updateDisplaySelectedSession() {
            const session = sessions[selectedSessionIndex]; // Get selected session for context (promo/session name)
            if (session) {
                displaySelectedSession.textContent = `${session.promo} - ${session.session}`;
            } else {
                displaySelectedSession.textContent = 'N/A';
            }
        }

        function startCountdown() {
            clearInterval(countdownInterval);
            const session = sessions[selectedSessionIndex]; // Get selected session for context (promo/session name)
            
            // Get user-defined start and end dates from inputs
            const userDefinedStartDateStr = personalStartDateInput.value;
            const userDefinedEndDateStr = personalEndDateInput.value;

            if (!userDefinedStartDateStr || !userDefinedEndDateStr) {
                countdownDays.textContent = '0';
                countdownHours.textContent = '0';
                countdownMinutes.textContent = '0';
                countdownSeconds.textContent = '0';
                deadlineDate.textContent = 'N/A';
                countdownTitle.textContent = 'Veuillez saisir vos dates de formation.';
                return;
            }

            const userDefinedStartDate = new Date(`${userDefinedStartDateStr}T00:00:00`).getTime();
            const userDefinedEndDate = new Date(`${userDefinedEndDateStr}T23:59:59`).getTime(); // End of day

            deadlineDate.textContent = formatDate(userDefinedEndDateStr);

            let targetDateForCountdown;
            let countdownDisplayTitle;

            const now = new Date().getTime();

            if (now < userDefinedStartDate) {
                // If current time is before the user's defined program start date
                targetDateForCountdown = userDefinedStartDate;
                countdownDisplayTitle = 'D√©but de votre formation dans :';
            } else if (now < userDefinedEndDate) {
                // If current time is on or after the user's defined program start date,
                // but before the user's defined end date
                targetDateForCountdown = userDefinedEndDate;
                countdownDisplayTitle = 'Fin de la formation dans :';
            } else {
                // If current time is on or after the user's defined end date
                clearInterval(countdownInterval);
                countdownDays.textContent = '0';
                countdownHours.textContent = '0';
                countdownMinutes.textContent = '0';
                countdownSeconds.textContent = '0';
                countdownTitle.textContent = 'Formation termin√©e !';
                return;
            }

            // Set the initial title
            countdownTitle.textContent = countdownDisplayTitle;

            countdownInterval = setInterval(() => {
                const nowInLoop = new Date().getTime(); // Get current time inside the loop for accuracy

                let distance = targetDateForCountdown - nowInLoop;

                // Check if phase changes (e.g., userDefinedStartDate is reached)
                if (nowInLoop >= userDefinedStartDate && targetDateForCountdown === userDefinedStartDate) {
                    // If we just passed the userDefinedStartDate, switch target to userDefinedEndDate
                    targetDateForCountdown = userDefinedEndDate;
                    countdownDisplayTitle = 'Fin de la formation dans :';
                    distance = targetDateForCountdown - nowInLoop; // Recalculate distance with new target
                }

                if (distance < 0) {
                    // Handle countdown finished for current target
                    if (targetDateForCountdown === userDefinedEndDate) {
                        // If formation ended
                        clearInterval(countdownInterval);
                        countdownDays.textContent = '0';
                        countdownHours.textContent = '0';
                        countdownMinutes.textContent = '0';
                        countdownSeconds.textContent = '0';
                        countdownTitle.textContent = 'Formation termin√©e !';
                    } else {
                        // This case should ideally not be reached with the current logic,
                        // but as a fallback, ensure it ends if somehow still negative.
                        clearInterval(countdownInterval);
                        countdownDays.textContent = '0';
                        countdownHours.textContent = '0';
                        countdownMinutes.textContent = '0';
                        countdownSeconds.textContent = '0';
                        countdownTitle.textContent = 'Formation termin√©e !';
                    }
                    return; // Exit interval function
                }

                const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((distance % (1000 * 60)) / 1000);

                countdownDays.textContent = days;
                countdownHours.textContent = hours;
                countdownMinutes.textContent = minutes;
                countdownSeconds.textContent = seconds;
                countdownTitle.textContent = countdownDisplayTitle; // Update title in loop too
            }, 1000);
        }
        
        function updateMotivationalPhrase() {
            const randomPhrase = motivationalPhrases[Math.floor(Math.random() * motivationalPhrases.length)];
            motivationalTitle.textContent = randomPhrase.title;
            motivationalText.textContent = randomPhrase.text;
        }

        // Initialization
        function initialize() {
            // Assign DOM elements first to ensure they are available
            programContainer = document.getElementById('program-container'); // This ID is no longer directly used as a top-level container
            totalProgressBar = document.getElementById('total-progress-bar');
            totalProgressText = document.getElementById('total-progress-text');
            
            userFirstnameInput = document.getElementById('user-firstname');
            userLastnameInput = document.getElementById('user-lastname');
            specializationChoiceRadios = document.querySelectorAll('input[name="specialization-choice"]');
            sessionSelect = document.getElementById('session-select');
            personalStartDateInput = document.getElementById('personal-start-date-input');
            personalEndDateInput = document.getElementById('personal-end-date-input');

            displaySelectedSession = document.getElementById('display-selected-session');
            deadlineDate = document.getElementById('deadline-date');
            countdownDays = document.getElementById('countdown-days');
            countdownHours = document.getElementById('countdown-hours');
            countdownMinutes = document.getElementById('countdown-minutes');
            countdownSeconds = document.getElementById('countdown-seconds');
            motivationalTitle = document.getElementById('motivational-title');
            motivationalText = document.getElementById('motivational-text');
            countdownTitle = document.getElementById('countdown-title');

            customAlertModal = document.getElementById('custom-alert-modal');
            customAlertMessage = document.getElementById('custom-alert-message');
            welcomeMessageDisplay = document.getElementById('welcome-message');
            mainTabButtons = document.querySelectorAll('.main-tab-button'); // New: assign main tab buttons

            // New: Assign specific tab content divs
            tabContentProgram = document.getElementById('tab-content-program');
            tabContentTraining = document.getElementById('tab-content-training');
            tabContentQCM = document.getElementById('tab-content-qcm');
            tabContentFinal = document.getElementById('tab-content-final');
            tabContentRattrapage = document.getElementById('tab-content-rattrapage');
            tabContentLives = document.getElementById('tab-content-lives'); // New: assign the lives tab content


            loadAllData(); // Now safe to load data, as DOM elements are assigned
            
            // Populate session select (main UI)
            sessionSelect.innerHTML = '';
            sessions.forEach((session, index) => {
                const option = document.createElement('option');
                option.value = index;
                option.textContent = `${session.promo} - ${session.session}`;
                sessionSelect.appendChild(option);
            });
            sessionSelect.value = selectedSessionIndex; // Set the loaded session

            // Set initial values for user settings inputs
            const savedUserName = localStorage.getItem('user_name');
            if (savedUserName) {
                const userName = JSON.parse(savedUserName);
                userFirstnameInput.value = userName.firstName;
                userLastnameInput.value = userName.lastName;
            }
            // Set specialization radio button
            document.querySelector(`input[name="specialization-choice"][value="${selectedSpecialization}"]`).checked = true;
            // Set personal start date input
            personalStartDateInput.value = customStartDates[selectedSessionIndex] || '';
            // Set personal end date input
            personalEndDateInput.value = customEndDates[selectedSessionIndex] || '';


            // Initial render and countdown
            updateWelcomeMessage();
            renderAppContent(); // This now renders the selected main tab
            updateMotivationalPhrase();
            updateDisplaySelectedSession();
            startCountdown();

            // Add event listeners for user settings inputs
            userFirstnameInput.addEventListener('input', () => { saveAllData(); updateWelcomeMessage(); });
            userLastnameInput.addEventListener('input', () => { saveAllData(); updateWelcomeMessage(); });

            specializationChoiceRadios.forEach(radio => {
                radio.addEventListener('change', (e) => {
                    selectedSpecialization = e.target.value;
                    saveAllData();
                    renderAppContent(); // Re-render the active tab content to filter by specialization
                });
            });

            sessionSelect.addEventListener('change', (e) => {
                selectedSessionIndex = parseInt(e.target.value);
                saveAllData();
                // Update personal start/end date inputs based on the newly selected session
                personalStartDateInput.value = customStartDates[selectedSessionIndex] || '';
                personalEndDateInput.value = customEndDates[selectedSessionIndex] || '';
                updateDisplaySelectedSession();
                startCountdown();
            });

            personalStartDateInput.addEventListener('change', (e) => {
                customStartDates[selectedSessionIndex] = e.target.value;
                saveAllData();
                startCountdown();
            });

            personalEndDateInput.addEventListener('change', (e) => {
                customEndDates[selectedSessionIndex] = e.target.value;
                saveAllData();
                startCountdown();
            });

            // New: Event listeners for main tab buttons
            mainTabButtons.forEach(button => {
                button.addEventListener('click', (e) => {
                    selectedMainTab = e.target.dataset.mainTab;
                    saveAllData(); // Save the selected tab
                    renderAppContent(); // Re-render to show content of the new tab
                });
            });
        }

        document.addEventListener('DOMContentLoaded', initialize);
    </script>
</body>
</html>
